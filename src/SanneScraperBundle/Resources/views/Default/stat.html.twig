{% extends 'SanneScraperBundle:Default:base.html.twig'  %}
{% block body %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h3 class="panel-title">Sanne's Media Consumption</h3>
        </div>
        <div class="panel-body">
            
            <style>
                html, body {
                    width: 100%;
                    height: 100%;
                    margin: 0px;
                    border: 0px;
                    border: 0px;
                }
                
                .boop {
                    width: 450px;
                    height: 450px;
                    margin: 5px ;
                    padding: 5px;
                }
            </style>

            <script>
                $.get("/sanne/get/years", function(data){
                    //console.log(data);
                    //TODO: populate the years list with this, for fun & foo
                }
                );
                
            </script>
            
            <div class="row">
                <div class="col-md-3 col-sm-3 col-lg-3" >
                    <div class="form-group" width="200px">
                        <label for="sel1">Select list:</label>
                        <select class="form-control" id="sel1">
                            {% for year in years %}
                            <option>{{year}}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
            </div>
                        
            <!--
             The idea is to separate this out as a view that gets returned on an API call  
            -->
            <div class="row"  >
                <div class="boop" id="boop" >
                    <canvas id="myChart" width="500" height="500"></canvas>
                </div>
                <script>
                    var ctx = document.getElementById("myChart").getContext('2d');
                    var data = {
                        labels: ['jan', 'feb', 'march', 'april', 'may', 'june', 'july', 'aug', 'sep', 'oct', 'nov', 'dec'],
                        datasets: [{
                                borderWidth: 5,
                        label: "Books ", // + {{results[1].getData()}} ,
                                data:{{ results[1].getData() }},
                                backgroundColor: ['rgba(0,206,209,0.8)']
                        }, {
                        label: ' Movies',// + {{results[0].getData()}} ,
                                data:{{ results[0].getData() }},
                                backgroundColor: ['rgba(205,92,92,0.8)']
                        }
                        ]
                    };
                    var chartInstance = new Chart(ctx, {
                        type: 'line',
                            data: data,
                            options: {
                                responsive: true,
                                maintainAspectRation: false,
                                title: {
                                    display: true,
                                    text: {{results[1].getYear}} ,
                                    padding: '1',
                                    fullWidth: true
                                },
                                scales: {
                                    yAxes: [{
                                            ticks: {
                                                stepSize: 1,
                                                max: 15
                                            }
                                    }]
                                }
                            }
                    });
                </script>
            </div>
        </div>
    </div>
{% endblock %}